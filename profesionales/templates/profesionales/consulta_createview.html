{% extends "base_admin.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block extra_head %}
{% endblock %}

{% block content %}
    <h2>Nueva Consulta</h2>
    <form method="post" novalidate>
    {% csrf_token %}
    {{ form|crispy}}

    <hr>
    <h3>Recetas</h3>

    {% for form in recetas_frm %}
        <div class="receta-form">
            {{ form|crispy }}
        </div>
    {% endfor %}
    
    <hr>
    <h3>Derivaciones</h3>
    {{ derivaciones_frm|crispy }}
    
    <hr>
    <h3>Prestaciones</h3>
    {{ prestaciones_frm|crispy }}

        <button type="submit" class="btn btn-success">Guardar Consulta</button>
    </form>
    <div class="line"></div>

{% endblock %}
{% block js_footer %}

    <script type="text/javascript" src="{% static 'admin/js/vendor/jquery/jquery.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/jquery.formset.js' %}" type="text/javascript"> </script>

    {{ form.media }}


<script type="text/javascript">
    $('.receta-form').formset({
        prefix: '{{ recetas_frm.prefix }}',
        uiText: {
            addPrompt: 'Agregar otro',         // Text used on the 'add a new form' control.
            removePrompt: 'Eliminar',        // Text used on the 'delete this existing form' 
        },
        deleteCssClass: 'btn btn-sm btn-danger',
        addCssClass: 'btn btn-sm btn-success'
    });
</script>


{% endblock js_footer %}